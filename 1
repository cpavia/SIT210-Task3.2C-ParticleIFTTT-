#include <Adafruit_DHT_Particle.h>

#define DHTTYPE  DHT11
#define DHTPIN   D2

DHT dht(DHTPIN, DHTTYPE);

double roomTempMax = 18;
double roomTemp;
bool roomtoowarm = false;

void setup()
{
  Serial.begin(9600);
  Particle.variable("roomTemp", &roomTemp, DOUBLE);
  dht.begin();
  delay(2000);
}

void loop()
{
  roomTemp = (int)dht.getTempCelcius();

  if(roomTemp>=roomTempMax && !roomtoowarm){
      Particle.publish("room_temp", "toowarm");
      roomtoowarm = true;
  }
  else if(roomTemp<roomTempMax && roomtoowarm){
      Particle.publish("room_temp", "justright");
      roomtoowarm = false;
  }
  
  delay(360000);
}
